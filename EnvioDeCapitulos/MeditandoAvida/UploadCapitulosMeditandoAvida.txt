// UploadCapitulosMandala.js

import admin from 'firebase-admin';
import serviceAccount from '../Src/FireBase/audiobooks-b7d84-firebase-adminsdk-fbsvc-92046b6b3a.json' assert { type: 'json' };


// Inicializa o app com a conta de servi√ßo
admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
});

const db = admin.firestore();

// Dados dos cap√≠tulos
const capitulos = [
  { id: 1, titulo: 'Pref√°cio', status: 'ok', narradorId: null },
  { id: 2, titulo: 'Introdu√ß√£o', status: 'ok', narradorId: null },
  { id: 3, titulo: 'Breve apresenta√ß√£o do Budismo', status: 'ok', narradorId: null },
  { id: 4, titulo: 'Pr√°tica na vida cotidiana', status: 'ok', narradorId: null },
  { id: 5, titulo: 'Prop√≥sito da educa√ß√£o no budismo', status: 'ok', narradorId: null },
  { id: 6, titulo: 'Medita√ß√£o', status: 'ok', narradorId: null },
  { id: 7, titulo: 'Supera√ß√£o das crises', status: 'ok', narradorId: null },
  { id: 8, titulo: 'Paz no dia', status: 'ok', narradorId: null },
  { id: 9, titulo: 'Conclus√£o', status: 'ok', narradorId: null },
];

// Fun√ß√£o principal
async function criarLivroComCapitulos() {
  try {
    const livroRef = await db.collection('Livros').add({
      Nome: 'Meditando a Vida',
      Autor: 'Padma Samten',
      Descricao: '',
    });

    const livroId = livroRef.id;
    console.log(`üìò Livro criado com ID: ${livroId}`);

    for (const capitulo of capitulos) {
      await db.collection('Livros').doc(livroId).collection('capitulos').add(capitulo);
      console.log(`‚úÖ Cap√≠tulo "${capitulo.titulo}" adicionado.`);
    }

    console.log('üéâ Todos os cap√≠tulos foram inseridos com sucesso.');
  } catch (error) {
    console.error('‚ùå Erro ao criar livro e cap√≠tulos:', error);
  }
}

criarLivroComCapitulos();
